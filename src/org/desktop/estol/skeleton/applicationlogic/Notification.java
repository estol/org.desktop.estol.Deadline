package org.desktop.estol.skeleton.applicationlogic;

import java.awt.TrayIcon;
import org.desktop.estol.skeleton.commons.NotificationIcon;

/**
 * Generated by the DeadlineCalendar object, to trigger the notification when 
 * said object expires.
 * 
 * @author estol
 */
public class Notification
{
    private String notificationName;
    private String notificationDescription;
    private WavePlayer wavePlayer;
    
    /**
     * We use @param notificationName for the notification's caption and
     * @param notificationDescription for the notification's description.
     */
    public Notification(String notificationName, String notificationDescription)
    {
        this.notificationName = notificationName;
        this.notificationDescription = notificationDescription;
        wavePlayer = new WavePlayer();
    }
    
    /**
     * returns the name of the notification
     * @return 
     */
    public String getNotificationName()
    {
        return notificationName;
    }
    
    /**
     * returns the description of the notification
     * @return 
     */
    public String getNotificationDescription()
    {
        return notificationDescription;
    }
    
    /**
     * starts the notification process
     * @param ml 
     */
    public void Notify(MainLogic ml)
    {
        trayNotification();
        audioNotification(ml);
    }
    
    /**
     * from the Notification objects inner state, creates a bubble on the
     * Notification Icon using the NotificationIcon enum
     */
    private void trayNotification()
    {
        NotificationIcon.displayMessage(getNotificationName(), getNotificationDescription(), TrayIcon.MessageType.INFO);
    }
    
    /**
     * plays the sounds, according to the MainLogic's active Settings's sound path
     * @param ml 
     */
    private void audioNotification(MainLogic ml)
    {
        // TODO get this from the settings
        wavePlayer.playSound(ml.getNotificationSoundPath());
    }
}
